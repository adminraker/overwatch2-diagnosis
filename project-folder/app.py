from flask import Flask, render_template, request

app = Flask(__name__)

# 38キャラのデータ
characters = {
    "tank": {
        "近距離": {
            "高い": { "簡単": ["ジャンカー・クイーン"], "普通": ["D.Va"], "難しい": ["ドゥームフィスト"] },
            "普通": { "簡単": ["オリーサ"], "普通": ["ラインハルト"], "難しい": ["ハザード"] },
            "低い": { "簡単": ["ロードホッグ"], "普通": ["ラマットラ"], "難しい": ["シグマ"] }
        },
        "中距離": {
            "高い": { "簡単": ["ウィンストン"], "普通": ["D.Va"], "難しい": ["レッキングボール"] },
            "普通": { "簡単": ["オリーサ"], "普通": ["オリーサ"], "難しい": ["ハザード"] },
            "低い": { "簡単": ["シグマ"], "普通": ["ザリア"], "難しい": ["ザリア"] }
        },
        "遠距離": {
            "高い": { "簡単": ["見つかりません"], "普通": ["見つかりません"], "難しい": ["見つかりません"] },
            "普通": { "簡単": ["オリーサ"], "普通": ["オリーサ"], "難しい": ["ラマットラ"] },
            "低い": { "簡単": ["シグマ"], "普通": ["シグマ"], "難しい": ["シグマ"] }
        }
    },
    "damage": {
        "近距離": {
            "高い": { "簡単": ["リーパー"], "普通": ["ベンチャー"], "難しい": ["ゲンジ"] },
            "普通": { "簡単": ["キャスディ"], "普通": ["ジャンクラット"], "難しい": ["シンメトラ"] },
            "低い": { "簡単": ["メイ"], "普通": ["メイ"], "難しい": ["メイ"] }
        },
        "中距離": {
            "高い": { "簡単": ["ソンブラ"], "普通": ["トレーサー"], "難しい": ["ゲンジ"] },
            "普通": { "簡単": ["ソルジャー76"], "普通": ["ソジョーン"], "難しい": ["エコー"] },
            "低い": { "簡単": ["バスティオン"], "普通": ["トールビョーン"], "難しい": ["キャスディ"] }
        },
        "遠距離": {
            "高い": { "簡単": ["ファラ"], "普通": ["ファラ"], "難しい": ["エコー"] },
            "普通": { "簡単": ["アッシュ"], "普通": ["ソジョーン"], "難しい": ["シンメトラ"] },
            "低い": { "簡単": ["メイ"], "普通": ["ハンゾー"], "難しい": ["ウィドウメイカー"] }
        }
    },
    "support": {
        "近距離": {
            "高い": { "簡単": ["ルシオ"], "普通": ["ルシオ"], "難しい": ["ルシオ"] },
            "普通": { "簡単": ["ブリギッテ"], "普通": ["ブリギッテ"], "難しい": ["ブリギッテ"] },
            "低い": { "簡単": ["マーシー"], "普通": ["マーシー"], "難しい": ["マーシー"] }
        },
        "中距離": {
            "高い": { "簡単": ["モイラ"], "普通": ["ジュノ"], "難しい": ["キリコ"] },
            "普通": { "簡単": ["ジュノ"], "普通": ["イラリー"], "難しい": ["キリコ"] },
            "低い": { "簡単": ["ライフウィーバー"], "普通": ["バティスト"], "難しい": ["バティスト"] }
        },
        "遠距離": {
            "高い": { "簡単": ["見つかりません"], "普通": ["見つかりません"], "難しい": ["見つかりません"] },
            "普通": { "簡単": ["キリコ"], "普通": ["キリコ"], "難しい": ["イラリー"] },
            "低い": { "簡単": ["ゼニヤッタ"], "普通": ["ゼニヤッタ"], "難しい": ["アナ"] }
        }
    }
}

def diagnose(role, range_type, mobility, difficulty):
    return characters.get(role, {}).get(range_type, {}).get(mobility, {}).get(difficulty, ["適切なキャラが見つかりませんでした"])

@app.route("/", methods=["GET", "POST"])
def home():
    if request.method == "POST":
        role = request.form["role"]
        range_type = request.form["range_type"]
        mobility = request.form["mobility"]
        difficulty = request.form["difficulty"]
        result = diagnose(role, range_type, mobility, difficulty)
        return render_template("index.html", result=result)
    return render_template("index.html", result=None)

if __name__ == "__main__":
    app.run(debug=True)
